$(document).ready(function(){function a(a,b,c){if("videos_datatable"===a){var d="https://i3.ytimg.com/vi/"+b[3]+"/mqdefault.jpg";$("<img/>").attr("src",d).load(function(){var a={w:this.width,h:this.height};120===a.w&&$(c).children("td").eq(3).html(e)})}else if("karaokedesclist"===a){var d=b;$("<img/>").attr("src",d).load(function(){var a={w:this.width,h:this.height};120===a.w&&$(c).children("img").replaceWith(e)})}}function b(a,b,c,d,e){var f=c[0],g=c[0].split(" "),h=g.join("-"),i='<img src="https://i3.ytimg.com/vi/';i+=b,i+='/mqdefault.jpg" alt="',i+=h,i+='-thumbnail" ',i+='height="84px" width="154px" ',i+="longdesc=\"Thumbnail for the Youtube karaoke video of '",i+=f+'\'" title="'+f+'"/>',$(a).html(i)}function c(){n.on("draw.dt",function(){for(;$("#karaokedesclist li").length>0;)$("#karaokedesclist").empty();if($("#videos_datatable tbody tr td.dataTables_empty").length<1){var b=0;$("#videos_datatable tbody tr").each(function(){b++;var a=$(this);a.attr("data-index_position",b-1);var c=n.row(a).data(),d=c[0],e=c[0].split(" "),f=e.join("-"),g='<li data-index_position="';g+=b-1,g+='">',g+='<img src="https://i3.ytimg.com/vi/'+c[3]+'/mqdefault.jpg" alt="'+f+'-thumbnail" width="160px" height="90px" longdesc="Thumbnail for the Youtube karaoke video of \''+d+"'\" />",g+="<h4>"+c[0]+"</h4>",g+="<p>("+c[4]+")</p>",g+="<h5>As Popularized By: <strong>"+c[2]+"</strong></h5>",g+="<p>From The Album: <em>"+c[6]+"</em> ("+c[7]+", "+c[8]+")</p>",g+="<p>"+c[10]+"</p>",g+="<p><em>"+c[9]+"</em></p>",g+="<p><em>"+c[5]+"</em></p>",g+="<p>Added By: "+c[11]+"</p>",g+="</li>",$("#karaokedesclist").append(g)}),$("#karaokedesclist li").each(function(){var b=$(this),c=$(this).children("img").attr("src");a("karaokedesclist",c,b)})}else if($("#videos_datatable tbody tr td.dataTables_empty").length>0){var c="<li>";c+="Sorry, No Info To Show",c+="</li>",$("#karaokedesclist").append(c)}})}function d(){var b=$("#videos_datatable").DataTable();$("#videos_datatable_filter.dataTables_filter label").contents().filter(function(){return 3===this.nodeType}).remove(),0===$("#search-icon").length&&$("#videos_datatable_filter.dataTables_filter label").prepend(f),0===$("#search_reset").length&&$("#videos_datatable_filter.dataTables_filter label").append(g);var c=$.ajax({url:"video_filter_values.php",dataType:"json"});if($("#genre-filter").empty(),$("#country-filter").empty(),c.done(function(a){$.each(a.genre,function(a,b){$("#genre-filter").append('<option value="'+b+'">'+b+"</option>")}),$("#genre-filter").prepend('<option value="reset">--Filter By Genre--</option>'),$("#genre-filter").val(k)}).done(function(a){$.each(a.country_of_origin,function(a,b){$("#country-filter").append('<option value="'+b+'">'+b+"</option>")}),$("#country-filter").prepend('<option value="reset">--Filter By Country--</option>'),$("#country-filter").val(l)}),$("#videos_datatable tbody tr td.dataTables_empty").length<1){var d=0;$("#videos_datatable tbody tr").each(function(){d++;var c=$(this);c.attr("data-index_position",d-1);var e=b.row(c).data();a("videos_datatable",e,c)})}$("#search_reset").on("click",function(){$(".form-control.input-sm").val(""),b.search("").draw()})}var e='<div class="offline-notification"><img src="images/no-video-black-with-text-320x180.jpg" width="160px" height="90px" alt="No-video-available" title="Video is unavailable"></div>',f='<img src="images/search_icon.png" width="32px" height="32px" alt="search icon" id="search-icon" />',g='<button id="search_reset" class="filter-reset-button">X</button>',h="reset",i="reset",j="reset",k="reset",l="reset",m='<section id="custom-filter-container" class="container-fluid">';m+='<div class="navbar-header">',m+='<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar-collapse-1" aria-expanded="false">',m+='<span class="icon-bar"></span>',m+='<span class="icon-bar"></span>',m+='<span class="icon-bar"></span>',m+="</button>",m+='<a class="navbar-brand" href="#">Filters</a>',m+="</div>",m+='<div class="collapse navbar-collapse" id="bs-navbar-collapse-1">',m+='<ul id="custom-filter" class="nav navbar-nav col-xs-12">',m+='<li class="filter col-xs-12 col-sm-4 col-md-4">',m+='<select id="decade-filter">',m+='<option value="reset" selected>--Filter By Decade--</option>',m+='<option value="2010">2010s</option>',m+='<option value="2000">2000s</option>',m+='<option value="1990">1990s</option>',m+='<option value="1980">1980s</option>',m+='<option value="1970">1970s</option>',m+='<option value="1960">1960s</option>',m+='<option value="1950">1950s</option>',m+='<option value="1940">1940s</option>',m+="</select>",m+='<button id="reset-decade-filter" class="filter-reset-button">X</button>',m+="</li>",m+='<li class="filter col-xs-12 col-sm-4 col-md-4">',m+='<select id="genre-filter">',m+="</select>",m+='<button id="reset-genre-filter" class="filter-reset-button">X</button>',m+="</li>",m+='<li class="filter col-xs-12 col-sm-4 col-md-4">',m+='<select id="country-filter">',m+="</select>",m+='<button id="reset-country-filter" class="filter-reset-button">X</button>',m+="</li>",m+="</ul>",m+="</div>",m+="</section>",jQuery.fn.dataTableExt.oApi.fnFilterOnReturn=function(a){var b=this;return this.each(function(a){$.fn.dataTableExt.iApiIndex=a;var c=$("input",b.fnSettings().aanFeatures.f);return c.unbind("keyup search input").bind("keypress",function(d){13===d.which&&($.fn.dataTableExt.iApiIndex=a,b.fnFilter(c.val()))}),this}),this},$("#videos_datatable").dataTable({processing:!0,serverSide:!0,ajax:{url:"ajax/table_processing.php",data:function(a){a.year_of_release=h,a.genre=i,a.country_of_origin=j,a.registered=registered}},dom:'f<"col-xs-12 navbar navbar-default" <"custom-filter-container container-fluid">><"col-xs-12"i><"col-sm-8 col-xs-12"l><"col-sm-4 col-xs-12"p><t><"col-sm-4 col-xs-12"i><"col-sm-8 col-xs-12"p><"col-xs-12"l>r',responsive:!0,columnDefs:[{orderable:!1,targets:[3,10]},{className:"never",targets:[1,11]},{className:"none",targets:[4,9,10]},{className:"all strong",targets:[0]},{className:"all",targets:[0]},{className:"all",targets:[3],createdCell:b},{className:"min-tablet",targets:[5,6]},{className:"min-desktop",targets:[2,7,8]}],order:[1,"desc"],stateSave:!1,sPaginationType:"listbox",drawCallback:d}).fnFilterOnReturn(),$("div.custom-filter-container").html(m);var n=$("#videos_datatable").DataTable();"green"===registered&&n.on("draw.dt",function(){$("#videos_datatable tbody tr td.dataTables_empty").length<1&&$("#videos_datatable tbody tr").each(function(){var a=$(this),b=n.row(a).data(),c=b[1],d=b[0],e=b[0].split(" "),f=e.join("+"),g=n.cell(this,0).node(),h="<p>"+d+"</p>";h+='<a href="update_video.php?id='+c+'">Edit Video Details</a>',h+='<a href="delete_video.php?video_id='+c+"&song_title="+f+'" onclick="return confirm(\'Are You Sure?\')"><p>Delete Video</p></a>',$(g).html(h)})}),c(),$("#info-buttons ul li#hideinfo").hide(),$("#info-buttons ul li").click(function(){$("#info-buttons ul li#showinfo").is(":visible")?($("#info-buttons ul li#showinfo").hide(),$("#info-buttons ul li#hideinfo").show()):$("#info-buttons ul li#hideinfo").is(":visible")&&($("#info-buttons ul li#hideinfo").hide(),$("#info-buttons ul li#showinfo").show())}),$("#decade-filter").change(function(){h=$(this).val(),n.draw()}),$("#genre-filter").change(function(){i=$(this).val(),k=i,n.draw()}),$("#country-filter").change(function(){j=$(this).val(),l=j,n.draw()}),$("#reset-decade-filter").click(function(){$("#decade-filter").val("reset"),h="reset",n.draw()}),$("#reset-genre-filter").click(function(){$("#genre-filter").val("reset"),i="reset",k=i,n.draw()}),$("#reset-country-filter").click(function(){$("#country-filter").val("reset"),j="reset",l=j,n.draw()})});