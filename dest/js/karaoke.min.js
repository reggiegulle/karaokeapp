$(document).ready(function(){function a(a,b){$("<img/>").attr("src",a).load(function(){s={w:this.width,h:this.height},120===s.w?b.parent().attr("data-visible","false").remove():b.parent().attr("data-visible","true")})}function b(){function b(){function b(a){var b=a.data("trindex"),c=$("#owlkaraoke");$("#videos_datatable tbody tr.playing, #karaoketitlelist li.playing, #owlkaraoke li.playing, #karaokedesclist li.playing").removeClass("playing"),$("#videos_datatable tbody").find('tr[data-trindex="'+b+'"]').addClass("playing"),$("#karaoketitlelist").find('li[data-trindex="'+b+'"]').addClass("playing"),$("#owlkaraoke").find('li[data-trindex="'+b+'"]').addClass("playing"),$("#karaokedesclist").find('li[data-trindex="'+b+'"]').addClass("playing"),$("#owlkaraoke li").each(function(){$(this).hasClass("playing")&&c.trigger("owl.goTo",$("#owlkaraoke li").index(this))})}$("#owlkaraoke li").each(function(){$(this).css({height:$("#owlkaraoke").height()+"px"});var c=$(this).children("img"),d=c.attr("src");a(d,c),$(this).addClass("gradient"),$(this).click(function(){b($(this).closest("li"));var a=$(this).attr("data-videoid");player.loadVideoById(a),$("html, body").animate({scrollTop:$("#video-player-container").offset().top},500)})})}function c(){var a=d.page.info(),b=a.page+1,c=a.pages,e=this.currentItem,f=this.maximumItem;1==b?0===e?$(".owl-buttons").html('<div class="owl-next">next</div>'):f>e?$(".owl-buttons").html('<div class="owl-prev">prev</div><div class="owl-next">next</div>'):e===f&&($(".owl-buttons").html('<div class="owl-prev">prev</div><div id="owl-nextpage">next page</div>'),$("#owl-nextpage").click(function(){d.page("next").draw(!1)})):c>b?0===e?($(".owl-buttons").html('<div id="owl-prevpage">prev page</div><div class="owl-next">next</div>'),$("#owl-prevpage").click(function(){d.page("previous").draw(!1)})):f>e?$(".owl-buttons").html('<div class="owl-prev">prev</div><div class="owl-next">next</div>'):e===f&&($(".owl-buttons").html('<div class="owl-prev">prev</div><div id="owl-nextpage">next page</div>'),$("#owl-nextpage").click(function(){d.page("next").draw(!1)})):b==c&&(f>e?($(".owl-buttons").html('<div id="owl-prevpage">prev page</div><div class="owl-next">next</div>'),$("#owl-prevpage").click(function(){d.page("previous").draw(!1)})):e===f&&($(".owl-buttons").html('<div id="owl-prevpage">prev page</div>'),$("#owl-prevpage").click(function(){d.page("previous").draw(!1)})))}var d=$("#videos_datatable").DataTable(),e=$("#owlkaraoke").addClass("owl-carousel"),e=$("#owlkaraoke").addClass("owl-theme");e.owlCarousel(),e.data("owlCarousel").destroy(),$("#owlkaraoke").removeClass("owl-carousel"),$("#owlkaraoke").removeClass("owl-theme"),$("#owlkaraoke").empty(),$("#karaoketitlelist").empty(),$("#karaokedesclist").empty(),$("#videos_datatable tbody tr").each(function(){function b(){return owllitext="",owllitext+="<h6>"+n+"</h6>",owllitext+="<p>"+o+"</p>",owllitext}function c(){var a="";return a+="<h6>"+n+"</h6>",a+="<p>Performed By: "+o+"</p>"}function e(){var a="";return a+=q,a+="<h6>"+n+"</h6>",a+="<p>Composed By: "+u+"</p>",a+="<p>Performed By: "+o+"</p>",a+="<p>From the Album: "+v+"</p>",a+="<p>Year of Release: "+w+"</p>",a+="<p>Genre: "+x+"</p>",a+="<p>Country of Origin: "+y+"</p>",a+="<p>Running Time: "+z+"</p>",a+="<p>Lyrics: </p><br /><pre>"+A+"</pre>"}var f=d.cell(this,4).data(),g=($(this).index(),d.row(this).index());$(this).attr({"data-videoid":f,"data-trindex":g});var h=d.cell(this,3).node(),i=$(h).html(),j=d.cell(this,4).node(),k=$(j).html();$(j).html('<img src="https://i3.ytimg.com/vi/'+k+'/mqdefault.jpg" alt="'+i+' thumbnail" width="120px" height="90px" longdesc="Thumbnail for the Youtube karaoke video of '+i+'" />');var l=$(j),m=$(l).children("img").attr("src");a(m,l);var n=d.cell(this,3).data(),o=d.cell(this,1).data(),p=$("<li>");p.attr({"data-videoid":f,"data-trindex":g});var q=$(j).html();p.append(q);var r=b();p.append(r),$("#owlkaraoke").append(p);var s=$("<li>");s.attr({"data-videoid":f,"data-trindex":g}),s.append(c),$("#karaoketitlelist").append(s);var t=$("<li>");t.attr({"data-videoid":f,"data-trindex":g});var u=d.cell(this,2).data(),v=d.cell(this,5).data(),w=d.cell(this,6).data(),x=d.cell(this,7).data(),y=d.cell(this,8).data(),z=d.cell(this,9).data(),A=d.cell(this,10).data();t.append(e),$("#karaokedesclist").append(t)});var e=$("#owlkaraoke").addClass("owl-carousel"),e=$("#owlkaraoke").addClass("owl-theme");e.owlCarousel({itemsDesktop:[1199,5],itemsDesktopSmall:[979,4],itemsTablet:[768,3],itemsMobile:[479,2],pagination:!1,navigation:!0,afterInit:b,beforeMove:c,afterAction:c}),$("#custom-search-input").on("keyup",function(){d.search(this.value).draw()}),$("#search_reset").on("click",function(){$("#custom-search-input").val(""),d.search($("#custom-search-input").val()).draw()})}var c="reset",d="reset",e="reset";$("#videos_datatable").dataTable({processing:!0,serverSide:!0,ajax:{url:"ajax/table_processing.php",data:function(a){a.year_of_release=c,a.genre=d,a.country_of_origin=e}},dom:'<"col-xs-12"i><"col-sm-8 col-xs-12"l><"col-sm-4 col-xs-12"p><"col-xs-12"t><"col-sm-4 col-xs-12"i><"col-sm-8 col-xs-12"p><"col-xs-12"l>r',responsive:!0,columnDefs:[{orderable:!1,targets:[4,10]},{className:"never",targets:[0,11]},{className:"none",targets:[2,5,9,10]},{className:"all strong",targets:[3]},{className:"all",targets:[3,4]},{className:"min-tablet",targets:[7]},{className:"min-desktop",targets:[0,6,8]}],order:[0,"desc"],sPaginationType:"listbox",stateSave:!1,sPaginationType:"listbox",drawCallback:function(a){b()}});var f=$("#videos_datatable").DataTable();$("#search-reset").click(function(){f.search("").draw()}),$("#decade-filter").change(function(){c=$(this).val(),f.draw()}),$("#genre-filter").change(function(){d=$(this).val(),f.draw()}),$("#country-filter").change(function(){e=$(this).val(),f.draw()})});