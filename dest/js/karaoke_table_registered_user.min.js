$(document).ready(function(){function a(a,b,c){if("videos_datatable"===a){var d="https://i3.ytimg.com/vi/"+b[3]+"/mqdefault.jpg";$("<img/>").attr("src",d).load(function(){var a={w:this.width,h:this.height};120===a.w&&$(c).children("td").eq(3).html(e)})}else if("karaokedesclist"===a){var d=b;$("<img/>").attr("src",d).load(function(){var a={w:this.width,h:this.height};120===a.w&&$(c).children("img").replaceWith(e)})}}function b(a,b,c,d,e){var f=c[0],g=c[0].split(" "),h=g.join("-"),i='<img class="table-thumbnail" src="https://i3.ytimg.com/vi/';i+=b,i+='/mqdefault.jpg" alt="',i+=h,i+='-thumbnail" ',i+='height="84px" width="154px" ',i+="longdesc=\"Thumbnail for the Youtube karaoke video of '",i+=f+'\'" title="'+f+'"/>',i+='<div class="video-thumbnail-play-icon-overlay"></div>',$(a).html(i)}function c(){p.on("draw.dt",function(){for(;$("#karaokedesclist li").length>0;)$("#karaokedesclist").empty();if($("#videos_datatable tbody tr td.dataTables_empty").length<1){var b=0;$("#videos_datatable tbody tr").each(function(){b++;var a=$(this),c=p.row(a).data(),d=c[0],e=c[0].split(" "),f=e.join("-"),g='<li data-index_position="';g+=b-1,g+='">',g+='<img src="https://i3.ytimg.com/vi/'+c[3]+'/mqdefault.jpg" alt="'+f+'-thumbnail" width="160px" height="90px" longdesc="Thumbnail for the Youtube karaoke video of \''+d+"'\" />",g+="<h4>"+c[0]+"</h4>",g+="<p>("+c[4]+")</p>",g+="<h5>As Popularized By: <strong>"+c[2]+"</strong></h5>",g+="<p>From The Album: <em>"+c[6]+"</em> ("+c[7]+", "+c[8]+")</p>",g+="<p>"+c[10]+"</p>",g+="<p><em>"+c[9]+"</em></p>",g+="<p><em>"+c[5]+"</em></p>",g+="<p>Added By: "+c[11]+"</p>",g+="</li>",$("#karaokedesclist").append(g)}),$("#karaokedesclist li").each(function(){var b=$(this),c=$(this).children("img").attr("src");a("karaokedesclist",c,b)})}else if($("#videos_datatable tbody tr td.dataTables_empty").length>0){var c='<li class="desclistempty">';c+="Sorry, No Info To Show",c+="</li>",$("#karaokedesclist").append(c)}})}function d(){var b=$("#videos_datatable").DataTable();if("green"===registered&&$("#videos_datatable tbody tr td.dataTables_empty").length<1){var c=0;$("#videos_datatable tbody tr").each(function(){var d,e=$(this),f=b.row(e).data(),g=f[1],h=f[0],i=f[0].split(" "),j=i.join("+"),k=b.cell(this,0).node();c++,e.attr("data-index_position",c-1),d="<p>"+h+"</p>",d+='<a href="update_video.php?id='+g+'">Edit Video Details</a>',d+='<a href="delete_video.php?video_id='+g+"&song_title="+j+'" onclick="return confirm(\'Are You Sure?\')"><p>Delete Video</p></a>',$(k).html(d).css({"background-color":"white","box-shadow":"none"}),a("videos_datatable",f,e)})}$("#videos_datatable_filter.dataTables_filter label").contents().filter(function(){return 3===this.nodeType}).remove(),0===$("#search-icon").length&&$("#videos_datatable_filter.dataTables_filter label").prepend(f),0===$("#search_reset").length&&$("#videos_datatable_filter.dataTables_filter label").append(g),$("#fields-for-sorting-videos").change(function(){h=parseInt($(this).val()),1===h?(i="desc",$("#reset-videos-sorting").trigger("click")):7===h?($("#order-for-num-sorting-videos").val("asc"),i="asc",$("#order-for-num-sorting-videos").show(),$("#order-for-text-sorting-videos").is(":visible")&&$("#order-for-text-sorting-videos").hide(),b.order([h,i]).draw()):($("#order-for-text-sorting-videos").val("asc"),i="asc",$("#order-for-text-sorting-videos").show(),$("#order-for-num-sorting-videos").is(":visible")&&$("#order-for-num-sorting-videos").hide(),b.order([h,i]).draw())}),$("#order-for-text-sorting-videos").change(function(){i=$(this).val(),$("#order-for-num-sorting-videos").val("asc"),b.order([h,i]).draw()}),$("#order-for-num-sorting-videos").change(function(){i=$(this).val(),$("#order-for-text-sorting-videos").val("asc"),b.order([h,i]).draw()}),$("#reset-videos-sorting").click(function(){$("#fields-for-sorting-videos").val("1"),$("#order-for-text-sorting-videos").val("asc"),$("#order-for-num-sorting-videos").val("asc"),$("#order-for-text-sorting-videos").is(":visible")&&$("#order-for-text-sorting-videos").hide(),$("#order-for-num-sorting-videos").is(":visible")&&$("#order-for-num-sorting-videos").hide(),b.order([1,"desc"]).draw()});var d=$.ajax({url:"video_filter_values.php",dataType:"json"});$("#genre-filter").empty(),$("#country-filter").empty(),d.done(function(a){$.each(a.genre,function(a,b){$("#genre-filter").append('<option value="'+b+'">'+b+"</option>")}),$("#genre-filter").prepend('<option value="reset" selected="selected">-- Filter By Genre --</option>'),$("#genre-filter").val(m)}).done(function(a){$.each(a.country_of_origin,function(a,b){$("#country-filter").append('<option value="'+b+'">'+b+"</option>")}),$("#country-filter").prepend('<option value="reset" selected="selected">-- Filter By Country --</option>'),$("#country-filter").val(n)}),$("#search_reset").on("click",function(){$(".form-control.input-sm").val(""),$("#reset-decade-filter").trigger("click"),$("#reset-genre-filter").trigger("click"),$("#reset-country-filter").trigger("click"),b.search("").draw()}),$("#decade-filter").change(function(){j=$(this).val(),b.draw()}),$("#genre-filter").change(function(){k=$(this).val(),m=k,b.draw()}),$("#country-filter").change(function(){l=$(this).val(),n=l,b.draw()}),$("#reset-decade-filter").click(function(){$("#decade-filter").val("reset"),j="reset",b.draw()}),$("#reset-genre-filter").click(function(){$("#genre-filter").val("reset"),k="reset",m=k,b.draw()}),$("#reset-country-filter").click(function(){$("#country-filter").val("reset"),l="reset",n=l,b.draw()}),$(".navbar-toggle").mouseenter(function(){$(".icon-bar").css({"background-color":"rgb(51, 255, 255)"})}),$(".navbar-toggle").mouseleave(function(){$(".icon-bar").css({"background-color":"white"})})}var e='<div class="offline-notification"><img src="images/no-video-black-with-text-320x180.jpg" width="160px" height="90px" alt="No-video-available" title="Video is unavailable"></div>',f='<img src="images/search_icon.png" width="32px" height="32px" alt="search icon" id="search-icon" />',g='<button id="search_reset" class="filter-reset-button">X</button>',h=1,i="desc",j="reset",k="reset",l="reset",m="reset",n="reset",o="";o+='<div class="navbar-header">',o+='<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar-collapse-1" aria-expanded="false">',o+='<span class="icon-bar"></span>',o+='<span class="icon-bar"></span>',o+='<span class="icon-bar"></span>',o+="</button>",o+='<div class="navbar-brand">Sort Or Filter</div>',o+="</div>",o+='<div class="collapse navbar-collapse" id="bs-navbar-collapse-1">',o+='<ul id="custom-sort-and-filter" class="nav navbar-nav col-xs-12">',o+='<li class="sort col-xs-12">',o+='<select id="fields-for-sorting-videos">',o+='<option value="1" selected="selected">-- Sort Videos By --</option>',o+='<option value="0">Title</option>',o+='<option value="2">Performer</option>',o+='<option value="6">Album</option>',o+='<option value="7">Year</option>',o+='<option value="5">Genre</option>',o+='<option value="8">Country</option>',o+="</select>",o+='<select id="order-for-text-sorting-videos">',o+='<option value="asc" selected="selected">A - Z</option>',o+='<option value="desc">Z - A</option>',o+="</select>",o+='<select id="order-for-num-sorting-videos">',o+='<option value="asc" selected="selected">Old - New</option>',o+='<option value="desc">New - Old</option>',o+="</select>",o+='<button id="reset-videos-sorting" class="filter-reset-button">X</button>',o+="</li>",o+='<li class="filter col-xs-12 col-sm-4 col-md-4">',o+='<select id="decade-filter">',o+='<option value="reset" selected="selected">-- Filter By Decade --</option>',o+='<option value="2010">2010s</option>',o+='<option value="2000">2000s</option>',o+='<option value="1990">1990s</option>',o+='<option value="1980">1980s</option>',o+='<option value="1970">1970s</option>',o+='<option value="1960">1960s</option>',o+='<option value="1950">1950s</option>',o+='<option value="1940">1940s</option>',o+="</select>",o+='<button id="reset-decade-filter" class="filter-reset-button">X</button>',o+="</li>",o+='<li class="filter col-xs-12 col-sm-4 col-md-4">',o+='<select id="genre-filter">',o+="</select>",o+='<button id="reset-genre-filter" class="filter-reset-button">X</button>',o+="</li>",o+='<li class="filter col-xs-12 col-sm-4 col-md-4">',o+='<select id="country-filter">',o+="</select>",o+='<button id="reset-country-filter" class="filter-reset-button">X</button>',o+="</li>",o+="</ul>",o+="</div>",jQuery.fn.dataTableExt.oApi.fnFilterOnReturn=function(a){var b=this;return this.each(function(a){$.fn.dataTableExt.iApiIndex=a;var c=$("input",b.fnSettings().aanFeatures.f);return c.unbind("keyup search input").bind("keypress",function(d){13===d.which&&($.fn.dataTableExt.iApiIndex=a,b.fnFilter(c.val()))}),this}),this},$("#videos_datatable").dataTable({processing:!0,serverSide:!0,ajax:{url:"ajax/table_processing.php",data:function(a){a.year_of_release=j,a.genre=k,a.country_of_origin=l,a.registered=registered}},dom:'f<"col-xs-12 navbar navbar-default container-fluid" <"custom-sort-and-filter-container row">><"col-xs-12"i><"col-sm-8 col-xs-12"l><"col-sm-4 col-xs-12"p><t><"col-sm-4 col-xs-12"i><"col-sm-8 col-xs-12"p><"col-xs-12"l>r',responsive:!0,columnDefs:[{orderable:!1,targets:[3,10]},{className:"never",targets:[1,11]},{className:"none",targets:[4,9,10]},{className:"all strong",targets:[0]},{className:"all",targets:[3],createdCell:b},{className:"min-tablet",targets:[2,6]},{className:"min-desktop",targets:[5,7,8]}],order:[0,"asc"],lengthMenu:[100,150],stateSave:!0,sPaginationType:"listbox",drawCallback:d}).fnFilterOnReturn(),$("div.custom-sort-and-filter-container").html(o),$("#videos_datatable_filter input.form-control.input-sm").val("");var p=$("#videos_datatable").DataTable();c(),$("#info-buttons ul li#hideinfo").hide(),$("#info-buttons ul li").click(function(){$("#info-buttons ul li#showinfo").is(":visible")?($("#info-buttons ul li#showinfo").hide(),$("#info-buttons ul li#hideinfo").show()):$("#info-buttons ul li#hideinfo").is(":visible")&&($("#info-buttons ul li#hideinfo").hide(),$("#info-buttons ul li#showinfo").show())})});