$(document).ready(function(){function a(a,b,c){if("videos_datatable"===a){var d="https://i3.ytimg.com/vi/"+b[3]+"/mqdefault.jpg";$("<img/>").attr("src",d).load(function(){var a={w:this.width,h:this.height};120===a.w&&$(c).children("td").eq(3).html(f)})}else if("karaokedesclist"===a){var d=b;$("<img/>").attr("src",d).load(function(){var a={w:this.width,h:this.height};120===a.w&&$(c).children("img").replaceWith(f)})}}function b(a,b,c,d,e){var f=c[0],g=c[0].split(" "),h=g.join("-"),i='<img class="table-thumbnail" src="https://i3.ytimg.com/vi/';i+=b,i+='/mqdefault.jpg" alt="',i+=h,i+='-thumbnail" ',i+='height="84px" width="154px" ',i+="longdesc=\"Thumbnail for the Youtube karaoke video of '",i+=f+'\'" title="'+f+'"/>',i+='<div class="video-thumbnail-play-icon-overlay"></div>',$(a).html(i)}function c(){s.on("draw.dt",function(){for(;$("#karaokedesclist li").length>0;)$("#karaokedesclist").empty();if($("#videos_datatable tbody tr td.dataTables_empty").length<1){var b=0;$("#videos_datatable tbody tr").each(function(){b++;var a=$(this),c=s.row(a).data(),d=c[0],e=c[0].split(" "),f=e.join("-"),g='<li data-index_position="';g+=b-1,g+='">',g+='<img src="https://i3.ytimg.com/vi/'+c[3]+'/mqdefault.jpg" alt="'+f+'-thumbnail" width="160px" height="90px" longdesc="Thumbnail for the Youtube karaoke video of \''+d+"'\" />",g+="<h4>"+c[0]+"</h4>",g+="<p>("+c[4]+")</p>",g+="<h5>As Popularized By: <strong>"+c[2]+"</strong></h5>",g+="<p>From The Album: <em>"+c[6]+"</em> ("+c[7]+", "+c[8]+")</p>",g+="<p>"+c[10]+"</p>",g+="<p><em>"+c[9]+"</em></p>",g+="<p><em>"+c[5]+"</em></p>",g+="<p>Added By: "+c[11]+"</p>",g+="</li>",$("#karaokedesclist").append(g)}),$("#karaokedesclist li").each(function(){var b=$(this),c=$(this).children("img").attr("src");a("karaokedesclist",c,b)})}else if($("#videos_datatable tbody tr td.dataTables_empty").length>0){var c='<li class="desclistempty">';c+="Sorry, No Info To Show",c+="</li>",$("#karaokedesclist").append(c)}})}function d(){$("#fields-for-sorting-videos").val("1"),$("#order-for-text-sorting-videos").val("asc"),$("#order-for-num-sorting-videos").val("asc"),$("#order-for-text-sorting-videos").is(":visible")&&$("#order-for-text-sorting-videos").hide(),$("#order-for-num-sorting-videos").is(":visible")&&$("#order-for-num-sorting-videos").hide()}function e(){var b=$("#videos_datatable").DataTable();if("green"===registered&&$("#videos_datatable tbody tr td.dataTables_empty").length<1){var c=0;$("#videos_datatable tbody tr").each(function(){var d,e=$(this),f=b.row(e).data(),g=f[1],h=f[0],i=f[0].split(" "),j=i.join("+"),k=b.cell(this,0).node();c++,e.attr("data-index_position",c-1),d="<p>"+h+"</p>",d+='<a href="update_video.php?id='+g+'">Edit Video Details</a>',d+='<a href="delete_video.php?video_id='+g+"&song_title="+j+'" onclick="return confirm(\'Are You Sure?\')"><p>Delete Video</p></a>',$(k).html(d).css({"background-color":"white","box-shadow":"none"}),a("videos_datatable",f,e)})}switch($("#videos_datatable_filter.dataTables_filter label").contents().filter(function(){return 3===this.nodeType}).remove(),0===$("#search-icon").length&&$("#videos_datatable_filter.dataTables_filter label").prepend(g),0===$("#search_reset").length&&$("#videos_datatable_filter.dataTables_filter label").append(h),k){case!1:$("#sort-fields-hide-and-reset-button").is(":visible")&&$("#sort-select-fields").is(":visible")&&($("#sort-fields-hide-and-reset-button").hide(),$("#sort-select-fields").hide(),d(),$("#order-for-text-sorting-videos").hide(),$("#order-for-num-sorting-videos").hide(),$("#sort-fields-reveal-button").click(function(){$("#sort-fields-hide-and-reset-button").show(),$("#sort-select-fields").show(),k=!0}),$("#sort-fields-hide-and-reset-button").click(function(){d(),$("#sort-fields-reveal-button").is(".unfolded")&&($("#sort-fields-reveal-button").removeClass("unfolded"),$("#sort-fields-reveal-button").addClass("folded")),i=1,j="desc",$("#sort-select-fields").hide(),$(this).hide(),b.order([i,j]).draw(),k=!1}));break;case!0:}$("#sort-fields-reveal-button").click(function(){if($(this).is(".folded"))$(this).removeClass("folded"),$(this).addClass("unfolded");else if($(this).is(".unfolded"))return!1}),1===i&&d(),$("#fields-for-sorting-videos").change(function(){i=parseInt($(this).val()),1===i?(j="desc",b.order([i,j]).draw()):7===i?($("#order-for-num-sorting-videos").val("asc"),j="asc",$("#order-for-num-sorting-videos").show(),$("#order-for-text-sorting-videos").is(":visible")&&$("#order-for-text-sorting-videos").hide(),b.order([i,j]).draw()):($("#order-for-text-sorting-videos").val("asc"),j="asc",$("#order-for-text-sorting-videos").show(),$("#order-for-num-sorting-videos").is(":visible")&&$("#order-for-num-sorting-videos").hide(),b.order([i,j]).draw())}),$("#order-for-text-sorting-videos").change(function(){j=$(this).val(),$("#order-for-num-sorting-videos").val("asc"),b.order([i,j]).draw()}),$("#order-for-num-sorting-videos").change(function(){j=$(this).val(),$("#order-for-text-sorting-videos").val("asc"),b.order([i,j]).draw()});var e=$.ajax({url:"video_filter_values.php",dataType:"json"});switch($("#genre-filter").empty(),$("#country-filter").empty(),e.done(function(a){$.each(a.genre,function(a,b){$("#genre-filter").append('<option value="'+b+'">'+b+"</option>")}),$("#genre-filter").prepend('<option value="reset" selected="selected">-- Filter By Genre --</option>'),$("#genre-filter").val(o)}).done(function(a){$.each(a.country_of_origin,function(a,b){$("#country-filter").append('<option value="'+b+'">'+b+"</option>")}),$("#country-filter").prepend('<option value="reset" selected="selected">-- Filter By Country --</option>'),$("#country-filter").val(p)}),$("#search_reset").on("click",function(){$(".form-control.input-sm").val(""),$("#reset-decade-filter").trigger("click"),$("#reset-genre-filter").trigger("click"),$("#reset-country-filter").trigger("click"),b.search("").draw()}),$("#decade-filter").change(function(){l=$(this).val(),b.draw()}),$("#genre-filter").change(function(){m=$(this).val(),o=m,b.draw()}),$("#country-filter").change(function(){n=$(this).val(),p=n,b.draw()}),$("#reset-decade-filter").click(function(){$("#decade-filter").val("reset"),l="reset",b.draw()}),$("#reset-genre-filter").click(function(){$("#genre-filter").val("reset"),m="reset",o=m,b.draw()}),$("#reset-country-filter").click(function(){$("#country-filter").val("reset"),n="reset",p=n,b.draw()}),q){case!1:$("#filter-fields-hide-and-reset-button").is(":visible")&&$("#filter-select-fields").is(":visible")&&($("#filter-fields-hide-and-reset-button").hide(),$("#filter-select-fields").hide(),q=!1),$("#filter-fields-reveal-button").click(function(){$(this).is(".folded")&&($(this).removeClass("folded"),$(this).addClass("unfolded")),$("#filter-fields-hide-and-reset-button").show(),$("#filter-select-fields").show(),$("#decade-filter").val("reset"),l="reset",$("#genre-filter").val("reset"),m="reset",o=m,$("#country-filter").val("reset"),n="reset",p=n,b.draw(),q=!0});break;case!0:$("#filter-fields-hide-and-reset-button").click(function(){$("#filter-fields-reveal-button").is(".unfolded")&&($("#filter-fields-reveal-button").removeClass("unfolded"),$("#filter-fields-reveal-button").addClass("folded")),$("#decade-filter").val("reset"),l="reset",$("#genre-filter").val("reset"),m="reset",o=m,$("#country-filter").val("reset"),n="reset",p=n,$("#filter-fields-hide-and-reset-button").hide(),$("#filter-select-fields").hide(),b.draw(),q=!1})}$(".navbar-toggle").mouseenter(function(){$(".icon-bar").css({"background-color":"rgb(51, 255, 255)"})}),$(".navbar-toggle").mouseleave(function(){$(".icon-bar").css({"background-color":"white"})})}var f='<div class="offline-notification"><img src="images/no-video-black-with-text-320x180.jpg" width="160px" height="90px" alt="No-video-available" title="Video is unavailable"></div>',g='<img src="images/search_icon.png" width="32px" height="32px" alt="search icon" id="search-icon" />',h='<button id="search_reset" class="filter-reset-button">X</button>',i=1,j="desc",k=!1,l="reset",m="reset",n="reset",o="reset",p="reset",q=!1,r="";r+='<ul id="custom-sort-and-filter" class="row">',r+='<li class="sort col-xs-12 col-sm-4 col-sm-offset-8 col-md-4 col-md-offset-8 col-lg-4 col-lg-offset-8">',r+='<button id="sort-fields-reveal-button" class="btn btn-default folded">Sort</button>',r+='<button id="sort-fields-hide-and-reset-button" class="filter-reset-button">X</button>',r+='<div id="sort-select-fields" class="panel">',r+='<select id="fields-for-sorting-videos">',r+='<option value="1" selected="selected">Party Shuffle</option>',r+='<option value="0">Title</option>',r+='<option value="2">Performer</option>',r+='<option value="6">Album</option>',r+='<option value="7">Year</option>',r+='<option value="5">Genre</option>',r+='<option value="8">Country</option>',r+="</select>",r+='<select id="order-for-text-sorting-videos">',r+='<option value="asc" selected="selected">A - Z</option>',r+='<option value="desc">Z - A</option>',r+="</select>",r+='<select id="order-for-num-sorting-videos">',r+='<option value="asc" selected="selected">Old - New</option>',r+='<option value="desc">New - Old</option>',r+="</select>",r+="</div>",r+="</li>",r+='<li class="filter col-xs-12 col-sm-5 col-sm-offset-7 col-md-5 col-md-offset-7 col-lg-5 col-lg-offset-7">',r+='<button id="filter-fields-reveal-button" class="btn btn-default folded">Filter</button>',r+='<button id="filter-fields-hide-and-reset-button" class="filter-reset-button">X</button>',r+='<ul id="filter-select-fields" class="panel row">',r+='<li class="col-xs-12">',r+='<select id="decade-filter">',r+='<option value="reset" selected="selected">Filter By Decade</option>',r+='<option value="2010">2010s</option>',r+='<option value="2000">2000s</option>',r+='<option value="1990">1990s</option>',r+='<option value="1980">1980s</option>',r+='<option value="1970">1970s</option>',r+='<option value="1960">1960s</option>',r+='<option value="1950">1950s</option>',r+='<option value="1940">1940s</option>',r+="</select>",r+='<button id="reset-decade-filter" class="filter-reset-button">X</button>',r+="</li>",r+='<li class="col-xs-12">',r+='<select id="genre-filter">',r+="</select>",r+='<button id="reset-genre-filter" class="filter-reset-button">X</button>',r+="</li>",r+='<li class="col-xs-12">',r+='<select id="country-filter">',r+="</select>",r+='<button id="reset-country-filter" class="filter-reset-button">X</button>',r+="</li>",r+="</ul>",r+="</li>",r+="</ul>",jQuery.fn.dataTableExt.oApi.fnFilterOnReturn=function(a){var b=this;return this.each(function(a){$.fn.dataTableExt.iApiIndex=a;var c=$("input",b.fnSettings().aanFeatures.f);return c.unbind("keyup search input").bind("keypress",function(d){13===d.which&&($.fn.dataTableExt.iApiIndex=a,b.fnFilter(c.val()))}),this}),this},$("#videos_datatable").dataTable({processing:!0,serverSide:!0,ajax:{url:"ajax/table_processing.php",data:function(a){a.year_of_release=l,a.genre=m,a.country_of_origin=n,a.registered=registered}},dom:'f<"custom-sort-and-filter-container"><"row"<"col-xs-12"i><"col-sm-8 col-xs-12"l><"col-sm-4 col-xs-12"p>><t><"row"<"col-sm-4 col-xs-12"i><"col-sm-8 col-xs-12"p><"col-xs-12"l>>r',responsive:!0,columnDefs:[{orderable:!1,targets:[3,10]},{className:"never",targets:[1,11]},{className:"none",targets:[4,9,10]},{className:"all strong",targets:[0]},{className:"all",targets:[3],createdCell:b},{className:"min-tablet",targets:[2,6]},{className:"min-desktop",targets:[5,7,8]}],order:[0,"asc"],lengthMenu:[100,150],stateSave:!0,sPaginationType:"listbox",drawCallback:e}).fnFilterOnReturn(),$("div.custom-sort-and-filter-container").html(r),$("#videos_datatable_filter input.form-control.input-sm").val("");var s=$("#videos_datatable").DataTable();c(),$("#info-buttons ul li#hideinfo").hide(),$("#info-buttons ul li").click(function(){$("#info-buttons ul li#showinfo").is(":visible")?($("#info-buttons ul li#showinfo").hide(),$("#info-buttons ul li#hideinfo").show()):$("#info-buttons ul li#hideinfo").is(":visible")&&($("#info-buttons ul li#hideinfo").hide(),$("#info-buttons ul li#showinfo").show())})});