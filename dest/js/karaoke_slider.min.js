$(document).ready(function(){function a(){$("html, body").animate({scrollTop:$("#karaoke-slider-1").offset().top},500)}function b(a,b){switch(a){case"karaoke-slider-1":$("#karaoke-slider-2 li").removeClass("active"),$("#karaoke-slider-2 li").eq(b).addClass("active"),$("#videos_datatable tbody").find("tr.active").removeClass("active"),$("#videos_datatable tbody tr").eq(b).addClass("active");break;case"karaoke-slider-2":$("#karaoke-slider-2 li").removeClass("active"),$("#karaoke-slider-2 li").eq(0).addClass("active"),$("#videos_datatable tbody").find("tr.active").removeClass("active"),$("#videos_datatable tbody tr").eq(0).addClass("active")}}function c(){for(;$("#karaoke-slider-1 li").length>0;)$("#karaoke-slider-1").empty();var a='<li class="no_results">';a+="<p>",a+="Sorry, no search results found.  Please try again.",a+="</p>",a+="</li>",$("#karaoke-slider-1").append(a),v.reloadSlider()}function d(a,b){var c=a[0],d=a[0].split(" "),e=d.join("-"),f='<li class="karaoke-slider-1-slide" data-index_position="'+b+'" data-video_id="'+a[3]+'">';return f+='<img src="https://i3.ytimg.com/vi/'+a[3]+'/hqdefault.jpg" width="100%" alt="'+e+'-karaoke-video-thumbnail" title="'+c+'">',f+='<div class="iframe-container"></div>',f+='<button class="karaoke-slider-1-play-button"></button>',f+='<div class="karaoke-splash-details-container">',f+='<div class="karaoke-splash-details">',f+="<h4>"+c+"</h4>",f+="<p>"+a[2]+"</p>",f+="</div>",f+="</div>",f+="</li>"}function e(){$(".karaoke-splash-details").each(function(){var a=$(this).height(),b=$(this).parent("div").height(),c=b-a,d=c/2;$(this).css({"margin-top":d+"px"})})}function f(){$("#karaoke-slider-1 li img").each(function(){var a,b=$(this).attr("src"),c=$(this);$("<img/>").attr("src",b).load(function(){a={width:this.width,height:this.height},a.width<320&&(c.siblings(".karaoke-slider-1-play-button").remove(),c.replaceWith('<img src="images/no-video-black-with-text.jpg" width="100%" alt="No-video-available" title="No video available">'))})})}function g(){$("button.karaoke-slider-1-play-button").click(function(){"black"===registered&&v.stopAuto();var a=$(this),b=(a.parents("li.karaoke-slider-1-slide"),a.parents("li.karaoke-slider-1-slide").data("video_id")),c=a.siblings("img"),d=c.height(),e=a.siblings(".karaoke-splash-details-container"),f=a.siblings("div.iframe-container");e.hide(),a.hide(),f.show().width("100%").height(d),c.hide(),f.html('<iframe id="ytplayer" type="text/html" width="100%" height="100%" src="http://www.youtube.com/embed/'+b+'?autoplay=1&rel=0&controls=2&rel=0 frameborder="0"&iv_load_policy=3/>')})}function h(){if($("#karaoke-slider-1 iframe").length>0){var a=$("#karaoke-slider-1 iframe"),b=a.parents("div.iframe-container"),c=b.siblings("img"),d=b.siblings("button"),e=b.siblings(".karaoke-splash-details-container");b.empty(),b.width(0).height(0).hide(),c.show(),d.show(),e.show(),"black"===registered&&v.startAuto()}}function j(c,i,j,k,n,o,p,q){function s(){x.page(p+1).draw("page")}for(;$("#karaoke-slider-1 li").length>0;)$("#karaoke-slider-1").empty();$("#videos_datatable tbody tr").each(function(){k++,i=$(this),j=x.row(i).data(),n=d(j,k),$("#karaoke-slider-1").append(n)}),"black"===c?v.reloadSlider({auto:!0,pager:!1,infiniteLoop:!1,nextSelector:$("div.custom-bx-next"),prevSelector:$("div.custom-bx-prev"),nextText:"&rang;",prevText:"&lang;",hideControlOnEnd:!0,pause:5500,speed:1e3,onSliderLoad:function(b){$(".karaoke-slider-1-slide-player-container").hide(),f(),e(),$("#videos_datatable tbody tr td img").click(function(){var b=$(this).parents("tr").data("index_position");$(this).parents("tr").not(".active")&&($("#videos_datatable tbody").find("tr.active").removeClass("active"),$(this).parents("tr").addClass("active")),v.goToSlide(b),a()}),g(),$("#karaokedesclist").hide(),l(b),m()},onSlideAfter:function(a,c,d){b("karaoke-slider-1",d),r(a,c,d),$("#karaokedesclist").hide(),$("#info-buttons ul li#hideinfo").is(":visible")&&($("#info-buttons ul li#hideinfo").hide(),$("#info-buttons ul li#showinfo").show()),v.startAuto(),h(),l(d),m(),a.data("index_position")===o&&(window.clearTimeout(q),q=window.setTimeout(s,6e3))}}):"green"===c&&v.reloadSlider({auto:!1,pager:!1,infiniteLoop:!1,nextSelector:$("div.custom-bx-next"),prevSelector:$("div.custom-bx-prev"),nextText:"&rang;",prevText:"&lang;",hideControlOnEnd:!0,onSliderLoad:function(b){$(".karaoke-slider-1-slide-player-container").hide(),f(),e(),$("#videos_datatable tbody tr td img").click(function(){var b=$(this).parents("tr").data("index_position");$(this).parents("tr").not(".active")&&($("#videos_datatable tbody").find("tr.active").removeClass("active"),$(this).parents("tr").addClass("active")),v.goToSlide(b),a()}),g(),$("#karaokedesclist").hide(),l(b),m()},onSlideAfter:function(a,c,d){b("karaoke-slider-1",d),r(a,c,d),$("#karaokedesclist").hide(),$("#info-buttons ul li#hideinfo").is(":visible")&&($("#info-buttons ul li#hideinfo").hide(),$("#info-buttons ul li#showinfo").show()),h(),l(d),m()}})}function k(){$(window).resize(function(){u(function(){var a=$("#karaoke-slider-1 div.iframe-container").filter(":visible"),b=a.parents("li.karaoke-slider-1-slide"),c=b.next(),d=c.children("img"),f=d.height();a.length>0?(a.height(f),$("#karaoke-slider-1-container").height(f+10),$("#karaoke-slider-1-container div.bx-viewport").height(f)):$("#karaoke-slider-1-container").height($("#karaoke-slider-1-container div.bx-viewport").height()+10),e()},250,"karaoke-slider-1-resize")})}function l(a){$("#karaokedesclist li").hide(),$("#karaokedesclist li").eq(a).show()}function m(){$("#showinfo").click(function(){$("#karaokedesclist").show(),"black"===registered&&v.stopAuto()}),$("#hideinfo").click(function(){$("#karaokedesclist").hide()})}function n(a){for(;$("#karaoke-slider-2 li").length>0;)$("#karaoke-slider-2").empty();$(".bxslider-custom-page-turn").hide(),a.length=0,w.reloadSlider({hideControlOnEnd:!1})}function o(a,b){var c=a[0],d=a[0].split(" "),e=d.join("-"),f='<li data-index_position="'+b+'" data-video_id="'+a[3]+'">';return f+='<img src="https://i3.ytimg.com/vi/'+a[3]+'/mqdefault.jpg" width="80%" alt="'+e+'-karaoke-video-thumbnail" title="'+c+'">',f+="<h6>",f+=a[0],f+="</h6>",f+="<p>",f+=a[2],f+="</p>",f+="</li>"}function p(){$("#karaoke-slider-2 li img").each(function(){var a,b=$(this).attr("src"),c=$(this);$(this).parent("li");$("<img/>").attr("src",b).load(function(){a={width:this.width,height:this.height},a.width<320&&c.replaceWith('<div class="karaoke-slider-2-no-video-notif"><img src="images/no-video-black-with-text-320x180.jpg" width="80%" alt="No-video-available" title="No video available"></div>')})})}function q(){$("#karaoke-slider-2 li").click(function(){var b=$(this).data("index_position")-1;$(this).not(".active")&&($("#karaoke-slider-2").find("li.active").removeClass("active"),$(this).addClass("active")),v.goToSlide(b),a()})}function r(a,b,c){w.goToSlide(c)}function s(a,c,d,e,f,g){for(;$("#karaoke-slider-2 li").length>0;)$("#karaoke-slider-2").empty();$("#videos_datatable tbody tr").each(function(){d++,a=$(this),c=x.row(a).data(),e=o(c,d),$("#karaoke-slider-2").append(e)}),w.reloadSlider({minSlides:2,maxSlides:10,slideWidth:200,moveSlides:1,pager:!1,infiniteLoop:!1,hideControlOnEnd:!0,onSliderLoad:function(){p(),q(),f.length=0;var a=$("#karaoke-slider-2-container .bx-viewport").height();for($("#karaoke-slider-2 li").css({height:a+"px"}),b("karaoke-slider-2"),$('#karaoke-slider-2 li[aria-hidden="false"]').each(function(){var a=$(this).data("index_position");f.push(a)}),i=0;i<f.length;i++)1===f[i]&&($(".bxslider-custom-page-turn").hide(),$("#prev-slider-page").show())},onSlideAfter:function(){for(f.length=0,$(".bxslider-custom-page-turn").hide(),$('#karaoke-slider-2 li[aria-hidden="false"]').each(function(){var a=$(this).data("index_position");f.push(a)}),i=0;i<f.length;i++)1===f[0]&&$("#prev-slider-page").show(),1!==f[0]&&$(".bxslider-custom-page-turn").hide(),f[i]===g&&($(".bxslider-custom-page-turn").hide(),$("#next-slider-page").show())}})}function t(a,b){0===a&&$("#prev-slider-page").hide(),a>0&&$("#prev-slider-page").click(function(){x.page(a-1).draw("page")}),b>a&&$("#next-slider-page").click(function(){x.page(a+1).draw("page")})}var u=function(){var a={};return function(b,c,d){d||(d="failedID"),a.uniqueId&&clearTimeout(a.uniqueId),a.uniqueId=setTimeout(b,c)}}(),v=$("#karaoke-slider-1").bxSlider(),w=$("#karaoke-slider-2").bxSlider(),x=$("#videos_datatable").DataTable();x.on("draw.dt",function(){var a,b,d,e,f,g=0,h=x.page.info(),i=h.pages,l=x.page(),m=[],o=$("#videos_datatable tbody tr").length;$("#videos_datatable tbody tr td.dataTables_empty").length<1?(j(registered,a,b,g,d,o,l,f),s(a,b,g,e,m,o),t(l,i),k()):$("#videos_datatable tbody tr td.dataTables_empty").length>0&&(c(),n(m))})});